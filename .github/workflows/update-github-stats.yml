name: Atualizar GitHub Stats e Linguagens
on:
  # Roda a cada 6 horas (vocÃª pode ajustar esta frequÃªncia)
  schedule:
    - cron: '0 */6 * * *' # min hora dia_do_mes mes dia_da_semana (a cada 6 horas)
  # Roda tambÃ©m quando hÃ¡ um push para a branch principal
  push:
    branches:
      - main # <--- ALtere para 'master' se sua branch principal for 'master'
  # Permite executar o workflow manualmente da aba 'Actions'
  workflow_dispatch:

jobs:
  generate_stats:
    runs-on: ubuntu-latest # O sistema operacional onde o workflow serÃ¡ executado
    permissions:
      contents: write # PermissÃ£o necessÃ¡ria para o workflow comitar arquivos no seu repositÃ³rio

    steps:
      # Faz o checkout do seu repositÃ³rio para que o Action possa acessar os arquivos
      - name: Checkout do RepositÃ³rio
        uses: actions/checkout@v4

      # Gera o card de estatÃ­sticas principal (GitHub Stats)
      - name: Gerar Card de EstatÃ­sticas
        uses: anuraghazra/github-readme-stats@master # Usa a Action do github-readme-stats
        with:
          username: CaioFelipe-Code # Seu nome de usuÃ¡rio do GitHub
          show_icons: true
          theme: dracula # Tema escolhido, como no seu README atual
          include_all_commits: true
          count_private: true # <--- AQUI o token PAT Ã© crucial para contar privados
          # O token de acesso pessoal que vocÃª criou e salvou como segredo
          token: ${{ secrets.PAT_GITHUB_TOKEN }} # <--- Referencia o segredo
          output_path: profile-assets/github-stats.svg # Caminho onde a imagem serÃ¡ salva no seu repositÃ³rio

      # Gera o card de linguagens mais usadas
      - name: Gerar Card de Linguagens Mais Usadas
        uses: anuraghazra/github-readme-stats@master
        with:
          username: CaioFelipe-Code # Seu nome de usuÃ¡rio do GitHub
          layout: compact
          langs_count: 16
          theme: dracula
          # O token de acesso pessoal
          token: ${{ secrets.PAT_GITHUB_TOKEN }} # <--- Referencia o segredo
          output_path: profile-assets/top-langs.svg # Caminho onde a imagem serÃ¡ salva

      # Configura as informaÃ§Ãµes do committer para o Git
      - name: Configurar InformaÃ§Ãµes do Committer
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

      # Comita as imagens geradas de volta para o repositÃ³rio
      - name: Comitar e Enviar Imagens Geradas
        run: |
          git add profile-assets/github-stats.svg
          git add profile-assets/top-langs.svg
          git commit -m "ğŸ“Š Atualizar GitHub Stats e Top Languages [skip ci]" || echo "NÃ£o hÃ¡ alteraÃ§Ãµes para comitar"
          git push
