name: Atualizar GitHub Stats e Linguagens (via Metrics)

on:
  # Roda a cada 6 horas (você pode ajustar esta frequência)
  schedule:
    - cron: '0 */6 * * *' # min hora dia_do_mes mes dia_da_semana (a cada 6 horas)
  # Roda também quando há um push para a branch principal
  push:
    branches:
      - main # <--- ALtere para 'master' se sua branch principal for 'master'
  # Permite executar o workflow manualmente da aba 'Actions'
  workflow_dispatch:

jobs:
  generate_metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write # Permissão necessária para o workflow comitar arquivos no seu repositório

    steps:
      # Faz o checkout do seu repositório
      - name: Checkout do Repositório
        uses: actions/checkout@v4

      # Gera o card de estatísticas completo com lowlighter/metrics
      - name: Gerar Card de Estatísticas Completo
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.PAT_GITHUB_TOKEN }} # <--- Seu token de acesso pessoal
          filename: profile-assets/github-stats.svg # <--- Caminho onde a imagem será salva
          
          # Configurações para o card de estatísticas
          user: CaioFelipe-Code # Seu nome de usuário do GitHub
          template: classic # Estilo clássico do card
          base: header, activity, community, repositories # Dados básicos a incluir
          
          # Removido: plugin_commits: yes (não é um parâmetro válido para metrics)
          
          # Plugins para incluir mais detalhes
          plugin_isocalendar: yes # Calendário de contribuições
          plugin_isocalendar_duration: full-year
          plugin_achievements: yes # Conquistas
          plugin_achievements_secrets: yes # Permite rastrear conquistas secretas (requer PAT)
          plugin_languages: yes # Linguagens mais usadas
          plugin_languages_colors: github # Cores das linguagens
          plugin_languages_ignored: html, css, jupyter notebook, markdown # Linguagens para ignorar
          plugin_languages_limit: 8 # Limite de linguagens a exibir
          plugin_languages_threshold: 0% # Mostrar todas acima de 0% de uso
          plugin_topics: yes # Tópicos dos repositórios
          plugin_topics_limit: 5 # Limite de tópicos a exibir
          # Para mais opções e plugins, veja a documentação de lowlighter/metrics

      # REMOVIDOS OS PASSOS DE 'git config', 'git add', 'git commit' e 'git push'
      # Pois lowlighter/metrics já faz isso automaticamente!
